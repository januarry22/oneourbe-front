<template>
<div class="content">
  
      <section class="section4">
       <ul class="best-item">
            <li v-for="(review,id) in reviews" :key="id">
              <div class="img">
                <!-- <img :src="require(`@/assets/img/${item.img}`)" />  -->
              <img src="../../assets/img/section5-6.jpg" alt="ì˜¤ëŠ˜ì˜ì§‘ë°°ì†¡">
                <button class="item-bookmark">
                  <b-icon class="bookmark" icon="bookmark"></b-icon>
                  <b-icon class="bookmark" icon="bookmark-fill"></b-icon>
                </button>
              </div>    
              <div class="info">
                  <p>í”ŒëŸ¬ìŠ¤ë¼ì¸</p>
                  <p class="name">[ì˜¤ëŠ˜ì˜ë”œ] ë¬´íƒ€ê³µë©”íƒˆìì„ ë„ì–´ìŠ¤í† í¼ ì‹¤ë‚´í˜„ê´€ ì‹¤ë‚´í˜„ê´€ ì‹¤ë‚´í˜„ê´€ ì‹¤ë‚´í˜„ê´€</p>
                  <div class="price-wrap">
                      <p class="discount">30%</p>
                      <p class="price">15,900</p>
                  </div>
                  <div class="review-wrap">
                  <p class="score"><b-icon icon="star-fill" style="color:#36C5F1;margin-right: 4px;"></b-icon>4.6</p>
                  <span class="review"> ë¦¬ë·° 60</span>
                  </div>
                  <div class="tag">
                  <b-badge class="free">ë¬´ë£Œë°°ì†¡</b-badge> 
                  <b-badge class="promotion">íŠ¹ê°€</b-badge>
                </div>   
              </div>
            </li>
          </ul>
      <infinite-loading @infinite="infiniteHandler" spinner="waveDots"></infinite-loading>
      </section>
          </div>
</template>

<script>
import InfiniteLoading from "vue-infinite-loading";

export default {
  name: 'SearchBestItem',
  components: {
    InfiniteLoading
  },
  created: function () {
  },
  methods: {
     infiniteHandler($state) {
            this.$axios.post('/api/v1/noti',
                {
                  "type" : "CS_NOTI"
                }
            ).then(res => {
                    if(res.data.totalPages == this.loadNum){
                        $state.complete();
                    }else{
                        setTimeout(() => {
                            const data = res.data.data;
                            for(let key in data){
                                this.reviews.push(data[key])
                            }
                            this.loadNum++;
                            $state.loaded();
                        }, 1000)
                    }
                })
                .catch(err => {
                    console.log(err)
                })
        }
  },
  data: function () {
    return {
        reviews:[
        {
          title: 'ê°€êµ¬',
          text: 'ì´ê±´ ê¼­! ì¶”ì²œë¦¬ìŠ¤íŠ¸',
          img: 'section3-1.jpg'
        },
        {
          title: 'íŒ¨ë¸Œë¦­',
          text: 'í™ˆì˜¤í”¼ìŠ¤ í™í•˜ê²Œ ì™„ì„±í–ˆì–´ìš”',
          img: 'section3-2.jpg'
        },
        {
          title: 'ê°€ì „',
          text: 'ìš•ì‹¤ ì‚´ë¦¼í…œ 10 #ë‚´ëˆë‚´ì‚°',
          img: 'section3-3.jpg'
        },
        {
          title: 'ìœ ì•„/ì•„ë™',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ã…ˆã…ë¬­',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ì£¼ë°©ìš”í’ˆ',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ë°ì½”/ì‹ë¬¼',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ìˆ˜ë‚©/ì •ë¦¬',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ìƒí™œìš©í’ˆ',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ìƒí•„í’ˆ',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ê³µêµ¬/DIY',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ì¸í…Œë¦¬ì–´ì‹œê³µ',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ë°˜ë ¤ë™ë¬¼',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ìº í•‘ìš©í’ˆ',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ì‹¤ë‚´ìš´ë™',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
         {
          title: 'ë Œíƒˆ',
          text: 'í›„íšŒì—†ëŠ” ì‚´ë¦¼í…œğŸ”Ÿ',
          img: 'section3-4.jpg'
        },
      ],
        loadNum: 0
     }
  },

}
</script>
<style scoped>
.list-wrap > li{
    padding: 5px;
}
.video-photo .order .num span {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(6%,50%);
    font-weight: bold;
    color: #ffffff;
    background-color: #FE7676;
}
.bookmark{
    width: 18px;
    height: 18px;
}
.best-item{
  padding: 25px;
}
.best-item > li {    
  border-bottom: 1px solid;
  border-color: #e4e4e4;
  padding: 0 0 20px 0;
  margin-bottom: 15px;
  display: flex;
  flex-direction: row;
  justify-content: space-evenly;
}
.best-item .img{
    max-height: 150px;
    width: 40%;
}
.img > img{
    width: 100%;
    height: 100%;
}
.info{
    padding: 10px;
    width: 60%;
}
.info > p{
    font-size: 13px;
    color: #928f8f;
    margin: 10px 0 5px 0;
}
.info .name{
    font-size: 14px;
    color: #282828;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 97%;
}
.price-wrap{
  display: flex;
  margin: 7px 0 7px 0;
}
.price{
    font-weight: bold;
    font-size: 18px;

}
.discount{
    color: #36C5F1;
    font-weight: bold;
    margin-right: 5px;
    font-size: 18px;
}
.review-wrap{
  margin: 5px 0 5px 0;
  display:flex;
}
.score{
    font-weight: bold;
    font-size: 12px;
    margin: 0 5px 0 0;
}
.review{
    color: #928f8f;
    font-size: 12px;
}
.tag{
  margin: 5px 0 5px 0;
}
.promotion{
  background-color: #FE7676;
  color: white;
  font-size: 10px;
  margin-right: 4px;
}
.free{
  background-color: #dddddd;
  color: #928f8f;
  font-size: 10px;
  margin-right: 4px;

}
</style>
